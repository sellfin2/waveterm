@import "@/common/icons/icons.less";

#main .screen-tabs .screen-tab {
    border-top: 1px solid transparent;
    font-size: var(--screentabs-font-size);
    line-height: var(--screentabs-line-height);
    font-family: var(--label-font-family);
    font-weight: var(--screentabs-font-weight);

    &:not(:hover) .status-indicator {
        .status-indicator-visible;
    }

    &:hover {
        .actions {
            .positional-icon-visible;
        }
    }

    svg.svg-icon-inner path {
        fill: var(--tab-color);
    }

    .icon i {
        color: var(--tab-color);
    }

    &.is-active {
        border-top: 1px solid var(--tab-color);
        background-color: var(--tab-color);
        background-image: linear-gradient(
            rgba(0, 0, 0, 0),
            rgba(0, 0, 0, 0.5) 15%,
            rgba(0, 0, 0, 0.7) 30%,
            rgba(0, 0, 0, 1) 100%
        );
    }

    &.color-green,
    &.color-default {
        --tab-color: var(--tab-green);
    }

    &.color-orange {
        --tab-color: var(--tab-orange);
    }

    &.color-red {
        --tab-color: var(--tab-red);
    }

    &.color-yellow {
        --tab-color: var(--tab-yellow);
    }

    &.color-blue {
        --tab-color: var(--tab-blue);
    }

    &.color-mint {
        --tab-color: var(--tab-mint);
    }

    &.color-cyan {
        --tab-color: var(--tab-cyan);
    }

    &.color-white {
        --tab-color: var(--tab-white);
    }

    &.color-violet {
        --tab-color: var(--tab-violet);
    }

    &.color-pink {
        --tab-color: var(--tab-pink);
    }

    .web-share-icon {
        position: relative;
        top: 1px;
        margin-right: 3px;
    }
}

// #main for selectivity
#main .screen-tabs-container {
    display: flex;
    position: relative;
    overflow: hidden;
    height: var(--screentabs-height);

    &:hover {
        z-index: 200;
    }

    &:hover .cmd-hints {
        display: flex;
    }

    .cmd-hints {
        position: absolute;
        bottom: -18px;
        left: 0px;
        display: flex;
    }

    .screen-tabs-container-inner {
        overflow-x: scroll;
    }

    .screen-tabs {
        display: flex;
        flex-direction: row;
        align-items: center;

        .screen-tab {
            display: flex;
            flex-direction: row;
            min-width: 13.6em;
            max-width: 13.6em;
            align-items: center;
            cursor: pointer;
            padding: 8px 8px 4px 8px; // extra 4px of tab padding to account for horizontal scrollbar (to make tab text look centered)

            .front-icon {
                .positional-icon-visible;
            }

            .tab-name {
                flex-grow: 1;
            }

            &.is-active {
                border-top: none;
                opacity: 1;
                font-weight: var(--screentabs-selected-font-weight);
            }

            &.is-archived {
                .fa.fa-archive {
                    margin-right: 4px;
                }
            }

            // Only one of these will be visible at a time
            .end-icons {
                // This adjusts the position of the icon to account for the default 8px margin on the parent. We want the positional calculations for this icon to assume it is flush with the edge of the screen tab.
                margin: 0 -8px 0 0;
                line-height: normal;
                .tab-index {
                    font-size: 12.5px;
                }
            }
        }
    }

    .new-screen {
        flex-shrink: 0;
        cursor: pointer;
        display: flex;
        align-items: center;
        height: 100%;

        .icon {
            height: 2rem;
            border-radius: 50%;
            padding: 0.4em;
            vertical-align: middle;
        }
    }

    .tabs-end-spacer {
        flex-grow: 1;
        min-width: 30px;
        -webkit-app-region: drag;
        height: 100%;
    }
}

// This ensures the tab bar does not collide with the floating logo. The floating logo sits above the sidebar when it is not collapsed, so no additional margin is needed in that case.
// More margin is given on macOS to account for the traffic light buttons
#main.platform-darwin.sidebar-collapsed .screen-tabs-container {
    margin-left: var(--floating-logo-width-darwin);
}

#main:not(.platform-darwin).sidebar-collapsed .screen-tabs-container {
    margin-left: var(--floating-logo-width);
}
